{
  "version": 3,
  "sources": ["../../../src/webview/views/full.ts"],
  "sourcesContent": ["export {};\r\n\r\ntype BridgeMessage<TPayload = any> = {\r\n  type: string;\r\n  id?: string;\r\n  timestamp?: number;\r\n  payload?: TPayload;\r\n  response?: any;\r\n};\r\n\r\ndeclare const acquireVsCodeApi: () => { postMessage: (msg: any) => void };\r\n\r\nconst vscode = acquireVsCodeApi();\r\n\r\nlet currentResult: any = null;\r\n\r\nfunction post(type: string, payload?: any): void {\r\n  vscode.postMessage({ type, id: genId(), timestamp: Date.now(), payload });\r\n}\r\n\r\nfunction genId(): string {\r\n  return `id_${Date.now()}_${Math.random().toString(36).slice(2, 10)}`;\r\n}\r\n\r\nfunction escapeHtml(text: string): string {\r\n  const div = document.createElement('div');\r\n  div.textContent = text;\r\n  return div.innerHTML;\r\n}\r\n\r\nfunction render(): void {\r\n  const app = document.getElementById('app');\r\n  if (!app) return;\r\n\r\n  if (!currentResult) {\r\n    app.innerHTML = `<p style=\"color: var(--vscode-descriptionForeground);\">\u6682\u65E0\u7FFB\u8BD1\u7ED3\u679C</p>`;\r\n    return;\r\n  }\r\n\r\n  const r = currentResult;\r\n  const alternatives: string[] = Array.isArray(r.alternatives) ? r.alternatives : [];\r\n  const explanations: any[] = Array.isArray(r.explanations) ? r.explanations : [];\r\n  const examples: any[] = Array.isArray(r.examples) ? r.examples : [];\r\n\r\n  app.innerHTML = `\r\n    <div style=\"display:flex; flex-direction:column; gap:14px;\">\r\n      <div>\r\n        <div style=\"font-size: 11px; color: var(--vscode-descriptionForeground); margin-bottom:6px;\">\u539F\u6587</div>\r\n        <div style=\"font-size: 13px; color: var(--vscode-descriptionForeground);\">${escapeHtml(String(r.original || ''))}</div>\r\n      </div>\r\n\r\n      <div>\r\n        <div style=\"font-size: 11px; color: var(--vscode-descriptionForeground); margin-bottom:6px;\">\u7FFB\u8BD1</div>\r\n        <div style=\"font-size: 16px; line-height: 1.7; padding: 12px; border-left: 3px solid var(--vscode-button-primaryBackground); background: var(--vscode-textBlockQuote-background);\">${escapeHtml(String(r.translation || ''))}</div>\r\n        ${r.pronunciation ? `<div style=\"margin-top:8px; font-style: italic; color: var(--vscode-textLink-foreground);\">${escapeHtml(String(r.pronunciation))}</div>` : ''}\r\n      </div>\r\n\r\n      ${alternatives.length ? `\r\n        <div>\r\n          <div style=\"font-size: 11px; color: var(--vscode-descriptionForeground); margin-bottom:6px;\">\u5176\u4ED6\u7FFB\u8BD1</div>\r\n          <div style=\"display:flex; flex-direction:column; gap:6px;\">\r\n            ${alternatives.map((alt, i) => `<div class=\"alternative-item\" data-index=\"${i}\" style=\"cursor:pointer; padding:8px; background: var(--vscode-editor-inactiveSelectionBackground);\">${escapeHtml(String(alt))}</div>`).join('')}\r\n          </div>\r\n        </div>\r\n      ` : ''}\r\n\r\n      ${explanations.length ? `\r\n        <div>\r\n          <div style=\"font-size: 11px; color: var(--vscode-descriptionForeground); margin-bottom:6px;\">\u8BCD\u6C47/\u91CA\u4E49</div>\r\n          <div style=\"display:flex; flex-direction:column; gap:6px;\">\r\n            ${explanations.map((e) => `<div style=\"padding:8px; background: var(--vscode-editor-inactiveSelectionBackground);\">\r\n              <div style=\"font-weight:600;\">${escapeHtml(String(e.word || ''))}</div>\r\n              <div style=\"color: var(--vscode-descriptionForeground);\">${escapeHtml(String(e.meaning || e.definition || ''))}</div>\r\n            </div>`).join('')}\r\n          </div>\r\n        </div>\r\n      ` : ''}\r\n\r\n      ${examples.length ? `\r\n        <div>\r\n          <div style=\"font-size: 11px; color: var(--vscode-descriptionForeground); margin-bottom:6px;\">\u4F8B\u53E5</div>\r\n          <div style=\"display:flex; flex-direction:column; gap:6px;\">\r\n            ${examples.map((ex) => `<div style=\"padding:8px; background: var(--vscode-editor-inactiveSelectionBackground);\">\r\n              <div style=\"color: var(--vscode-descriptionForeground);\">${escapeHtml(String(ex.original || ex.source || ''))}</div>\r\n              <div>${escapeHtml(String(ex.translation || ex.target || ''))}</div>\r\n            </div>`).join('')}\r\n          </div>\r\n        </div>\r\n      ` : ''}\r\n\r\n      <div style=\"display:flex; gap:8px;\">\r\n        <button class=\"action-copy\" style=\"flex:1;\">\u590D\u5236</button>\r\n        <button class=\"action-replace\" style=\"flex:1;\">\u66FF\u6362</button>\r\n        <button class=\"action-sendToSimple\" style=\"flex:1;\">\u56DE\u5230\u7B80\u7248</button>\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\nfunction showProgress(message?: string): void {\r\n  const app = document.getElementById('app');\r\n  if (!app) return;\r\n  app.innerHTML = `<p style=\"color: var(--vscode-descriptionForeground);\">${escapeHtml(message || '\u6B63\u5728\u7FFB\u8BD1...')}</p>`;\r\n}\r\n\r\nfunction showError(error: string): void {\r\n  const app = document.getElementById('app');\r\n  if (!app) return;\r\n  app.innerHTML = `<p style=\"color: var(--vscode-errorForeground);\">${escapeHtml(error)}</p>`;\r\n}\r\n\r\nwindow.addEventListener('message', (event: MessageEvent<BridgeMessage>) => {\r\n  const message = event.data;\r\n  if (!message || !message.type) return;\r\n\r\n  if (message.type === 'translate.result') {\r\n    currentResult = message.payload?.result;\r\n    render();\r\n  } else if (message.type === 'translate.progress') {\r\n    showProgress(message.payload?.message);\r\n  } else if (message.type === 'translate.error') {\r\n    showError(String(message.payload?.error || '\u7FFB\u8BD1\u5931\u8D25'));\r\n  }\r\n});\r\n\r\ndocument.addEventListener('click', (e) => {\r\n  const target = e.target as HTMLElement | null;\r\n  if (!target) return;\r\n\r\n  if (target.classList.contains('action-copy')) {\r\n    post('action.copy');\r\n  } else if (target.classList.contains('action-replace')) {\r\n    post('action.replace');\r\n  } else if (target.classList.contains('action-sendToSimple')) {\r\n    post('action.sendToSimple');\r\n  } else if (target.classList.contains('alternative-item')) {\r\n    const index = Number(target.getAttribute('data-index'));\r\n    if (Number.isFinite(index)) {\r\n      post('action.selectAlternative', { index });\r\n    }\r\n  }\r\n});\r\n\r\npost('panel.focus');\r\nshowProgress('\u7B49\u5F85\u7FFB\u8BD1\u7ED3\u679C...');\r\n"],
  "mappings": "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",
  "names": []
}
